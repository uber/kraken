castore:
  upload_dir: /var/cache/kraken/kraken-proxy/upload/
  cache_dir:  /var/cache/kraken/kraken-proxy/cache/
  capacity: 1024

zap:
  level: info
  development: false
  encoding: console
  disableStacktrace: true
  encoderConfig:
    messageKey: message
    nameKey: logger_name
    levelKey: level
    timeKey: ts
    callerKey: caller
    stacktraceKey: stack
    levelEncoder: capital
    timeEncoder: iso8601
    durationEncoder: seconds
    callerEncoder: short
  outputPaths:
    - stdout
    - /var/log/kraken/kraken-proxy/stdout.log
  errorOutputPaths:
    - stdout
    - /var/log/kraken/kraken-proxy/stdout.log

metrics:
  m3:
    service: kraken-proxy

# Distributed tracing configuration (Jaeger via OTLP)
tracing:
  enabled: false  # Set to true to enable tracing
  service_name: kraken-proxy
  agent_host: localhost  # Jaeger/OTLP collector host
  agent_port: 4318       # OTLP HTTP port (Jaeger supports this natively)
  sampling_rate: 1.0     # Sample 100% for testing (reduce in production)

server:
  listener:
    net: unix
    addr: /tmp/kraken-proxy.sock
  # Minimum size for a blob to be prefetched. Default: 0 (no minimum).
  # Supports units: B, KB, MB, GB, TB (or K, M, G, T)
  # Examples: "50M", "100MB", "1G", "500M"
  prefetch_min_blob_size: 0
  # Maximum size for a blob to be prefetched. Default: 50G.
  # Examples: "10G", "50GB", "100G"
  prefetch_max_blob_size: "50G"

registry:
  docker:
    version: 0.1
    log:
      level: error
    http:
      net: unix
      addr: /tmp/kraken-proxy-registry.sock

registryoverride:
  listener:
    net: unix
    addr: /tmp/kraken-proxy-registry-override.sock

nginx:
  name: kraken-proxy
  cache_dir: /var/cache/kraken/kraken-proxy/nginx/
  log_dir: /var/log/kraken/kraken-proxy/
