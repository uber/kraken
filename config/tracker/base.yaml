zap:
  level: info
  development: false
  disableStacktrace: true
  encoding: console
  encoderConfig:
    messageKey: message
    nameKey: logger_name
    levelKey: level
    timeKey: ts
    callerKey: caller
    stacktraceKey: stack
    levelEncoder: capital
    timeEncoder: iso8601
    durationEncoder: seconds
    callerEncoder: short
  outputPaths:
    - stdout
    - /var/log/kraken/kraken-tracker/stdout.log
  errorOutputPaths:
    - stdout
    - /var/log/kraken/kraken-tracker/stdout.log

logging:
  level: info
  stdout: true
  sentry:
    enabled: false
    tags:
      deployment: default

peerhandoutpolicy:
  priority: completeness

# In-memory cache configuration for peer information
peerstore:
  local:
    # TTL for peer entries in local store
    ttl: 5h
  redis:
    # Redis configuration (disabled by default, uses local store)
    enabled: false
    # Time window size for grouping peer announcements
    peer_set_window_size: 1h
    # Maximum number of time windows to keep
    max_peer_set_windows: 5
    # Connection pool settings
    max_idle_conns: 10
    max_active_conns: 500
    idle_conn_timeout: 60s
    dial_timeout: 5s
    read_timeout: 30s
    write_timeout: 30s

# In-memory cache configuration for origin locations
originstore:
  # TTL for caching origin locations for blobs
  locations_ttl: 10s
  # TTL for caching location lookup errors
  locations_error_ttl: 1s
  # TTL for origin context information
  origin_context_ttl: 10s
  # TTL for marking origins as unavailable
  origin_unavailable_ttl: 1m

metrics:
  m3:
    service: kraken

trackerserver:
  listener:
    net: unix
    addr: /tmp/kraken-tracker.sock

nginx:
  name: kraken-tracker
  cache_dir: /var/cache/kraken/kraken-tracker/nginx/
  log_dir: /var/log/kraken/kraken-tracker/
